<!DOCTYPE html>
<html lang="en">
<head>
    <title>Multiplication Table Practice</title>
    <meta charset="utf-8"/>
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <link type="text/css" rel="stylesheet" href="assets/style.css">
    <script src="wasm_exec.js"></script>
</head>
<body>
<h1>Multiplication Table Practice</h1>
<div class="generate">
    <button id="generate" class="bubbly-button" onclick="generate()">Generate new exercise</button>
</div>
<div id="operation">
    <span id="operand1">0</span>
    <span>x</span>
    <span id="operand2">0</span>
    <span>=</span>
    <label for="providedAnswer"></label><input type="number" id="providedAnswer"/>
    <button onClick="validate(providedAnswer.value)">Check</button>
</div>
</body>
<script>
    const factorFurry = new Go();
    WebAssembly.instantiateStreaming(fetch('assets/multiplications.wasm'),
        factorFurry.importObject).then((result) => {
        factorFurry.run(result.instance);
        generate();
    });

    document.getElementById('providedAnswer').addEventListener('keyup', function onEvent(e) {
        if (e.key === 'Enter' || e.key === 'NumpadEnter') {
            validate(providedAnswer.value)
        }
    });

    // bubbly

    let animateButton = function(e) {

        e.preventDefault;
        //reset animation
        e.target.classList.remove('animate');

        e.target.classList.add('animate');
        setTimeout(function(){
            e.target.classList.remove('animate');
        },700);
    };

    let bubblyButtons = document.getElementsByClassName("bubbly-button");

    for (let i = 0; i < bubblyButtons.length; i++) {
        bubblyButtons[i].addEventListener('click', animateButton, false);
    }
</script>
</html>
